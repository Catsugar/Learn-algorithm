<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Inventory Update</title>
</head>

<body>
<script>
/*依照一个存着新进货物的二维数组，更新存着现有库存(在 arr1 中)的二维数组. 如果货物已存在则更新数量 .
 如果没有对应货物则把其加入到数组中，更新最新的数量. 返回当前的库存数组，且按货物名称的字母顺序排列.*/
function updateInventory(arr1, arr2) {
  console.log("===================================================================*");
  console.log("arr1"+arr1);
  console.log("arr2"+arr2);
  if((arr1===undefined) && (arr2=== undefined  )){return [];}
  else if(arr1===[]|| undefined ){return arr2;}
  else if(arr2===[]|| undefined ){return arr1;}
  //两个数都存在
  var arr3=[];
  arr3=arr1;
  for(var i=0;i<arr2.length; i++){
	 //console.log("*************开始比i个数******************");
	 var w=false;
	 for(var j=0;j<arr3.length; j++){
		console.log("arr2----"+arr2[i][1]+"arr3----"+arr3[j][1]);
		console.log(compare(arr2[i][1],arr3[j][1]));
		if(compare(arr2[i][1],arr3[j][1])===-1){
			 //console.log("此刻的位置J-----"+j);
			 arr3=arr3.slice(0,j).concat([arr2[i]]).concat(arr3.slice(j));
			 //console.log(arr3);
			 w=true;
			 break;
	    }else if(compare(arr2[i][1],arr3[j][1])===0){
		     arr3[j][0]=arr3[j][0]+arr2[i][0];
			// console.log(arr3);
			 w=true;
			 break;
		}
	 }
	 if(w===false){ 
	    arr3.push(arr2[i]);
	 }
  }
  console.log("循环以后--------"+arr3);
  return arr3;
   //按字符排序（新的）
  function compare(a,b){
    var L=(a.length<=b.length)?a.length:b.length;
    for(var i=0;i<L; i++){
      if(a.charCodeAt(i)> b.charCodeAt(i)){return 1;}
	  else if(a.charCodeAt(i)< b.charCodeAt(i)){return -1;}
    }
	return 0;
  }
}

// Example inventory lists
var curInv = [
    [21, "a1"],
    [2, "c1"],
    [1, "e1"],
    [5, "g1"]
];

var newInv = [
    [2, "c1"],
    [3, "d2"],
    [67, "a1"],
    [7, "h2"]
];



/*var curInv = [
    [21, "Bowling Ball"],
    [2, "Dirty Sock"],
    [1, "Hair Pin"],
    [5, "Microphone"]
];

var newInv = [
    [2, "Hair Pin"],
    [3, "Half-Eaten Apple"],
    [67, "Bowling Ball"],
    [7, "Toothpaste"]
];*/

console.log("最后的结果是-----"+updateInventory(curInv, newInv));
console.log("最后的结果是-----"+updateInventory());
console.log("最后的结果是-----"+updateInventory([[21, "Bowling Ball"], [2, "Dirty Sock"], [1, "Hair Pin"], [5, "Microphone"]], [[2, "Hair Pin"], [3, "Half-Eaten Apple"], [67, "Bowling Ball"], [7, "Toothpaste"]]));
console.log("最后的结果是-----"+updateInventory([[21, "Bowling Ball"], [2, "Dirty Sock"], [1, "Hair Pin"], [5, "Microphone"]], [[2, "Hair Pin"], [3, "Half-Eaten Apple"], [67, "Bowling Ball"], [7, "Toothpaste"]]) );
console.log("最后的结果是-----"+updateInventory([], [[2, "Hair Pin"], [3, "Half-Eaten Apple"], [67, "Bowling Ball"], [7, "Toothpaste"]]));
console.log("最后的结果是-----"+updateInventory([[0, "Bowling Ball"], [0, "Dirty Sock"], [0, "Hair Pin"], [0, "Microphone"]], [[1, "Hair Pin"], [1, "Half-Eaten Apple"], [1, "Bowling Ball"], [1, "Toothpaste"]]) );
console.log("最后的结果是-----"+updateInventory([[21, "Bowling Ball"], [2, "Dirty Sock"], [1, "Hair Pin"], [5, "Microphone"]], []) );

</script>
</body>
</html>
